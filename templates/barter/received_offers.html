{% extends 'base.html' %}
{% block title %}Received Offers{% endblock %}

{% block content %}

<style>
.card {
    border: 1px solid #333 !important;
    border-radius: 8px !important;
    padding: 15px !important;
    margin-bottom: 15px !important;
    background: #fafafa !important;
    width: 100% !important;   /* Force vertical width */
}
</style>

<h2>Received Offers</h2>

{% for o in offers %}
    <div class="card">
        <p><strong>From:</strong> {{ o.sender.username }}</p>
        <p><strong>Offering:</strong> {{ o.sender_product.title }}</p>
        <p><strong>For:</strong> {{ o.receiver_product.title }}</p>
        <p><strong>Status:</strong> {{ o.status }}</p>

        <a href="{% url 'offer_detail' o.id %}" class="btn">View Offer</a>

        {% if o.status == 'accepted' %}
            <a href="{% url 'offer_chat_page' o.id %}" class="btn">Go to Chat</a>
        {% endif %}

        {% if o.receiver == request.user and o.status == 'pending' %}
            <a href="{% url 'accept_offer' o.id %}" class="btn">Accept</a>
            <a href="{% url 'reject_offer' o.id %}" class="btn">Reject</a>
        {% endif %}
    </div>
{% empty %}
    <p>No received offers yet.</p>
{% endfor %}
{% endblock %}
